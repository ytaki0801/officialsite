<!DOCTYPE html>
<html>
  <head>
    <title>Wolfram (2,3) TM in JavaScript</title>
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@ytaki0801">
    <meta name="twitter:title" content="Wolfram (2,3) TM in JavaScript">
    <meta name="twitter:description" content="Wolfram's 2-state 3-symbol Turing Machine as an Universal Turing Machine written in JavaScript">
    <meta name="twitter:image" content="https://ytaki0801.github.io/TAKIZAWAYozo1.jpg">
    <script type="text/javascript">

function drawcell(n, ny, c, ct) {
  const w = 10; //document.getElementByName("pixel");
  const x = 10 + n * w, y = 10 + ny * w;
  dc = ['white', 'yellow', 'orange'];

  ct.fillStyle = dc[c];
  ct.fillRect(x, y, w, w);
}

async function draw() {
  const canvas = document.getElementById('w23tm');
  const context = canvas.getContext('2d');

  delta = [[[1,1, 1], [0,2,-1], [0,1,-1]],
           [[0,2,-1], [1,2, 1], [0,0, 1]]];

  let state = 0, tape = [0], head = 0;

  const step_value = 200; //document.getElementByName("step");
  const space = 30;
  for (let step = 0; step < step_value; step++) {
    const t = delta[state][tape[head]];
    state = t[0], tape[head] = t[1], head += t[2];
    if (head >= tape.length) {
      tape.push(0);
    } else if (head < 0) {
      tape.unshift(0), head++, space--;
    }
    for (let n = 0; n < space; n++)
      drawcell(n, step, 0, context);
    for (let n = 0; n < tape.length; n++)
      drawcell(space + n, step, tape[n], context);
    await new Promise(r => setTimeout(r, 40));
  }
}

    </script>
  </head>

  <body>
    <form id="form">
      <input type="button" onclick="draw();" value="start">
      <!-- Pixel: <input type="text" name="pixel" size="5" placeholder="10" -->
      <!-- Step:  <input type="text" name="step"  size="5" placeholder="200" -->
      <div><canvas id="w23tm" width="400" height="2000"></canvas></div>
    </form>
  </body>

</html>
